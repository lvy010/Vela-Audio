# Vela éŸ³ä¹æ’­æ”¾å™¨

åŸºäº OpenVela ç³»ç»Ÿçš„ç°ä»£åŒ–åµŒå…¥å¼éŸ³ä¹æ’­æ”¾å™¨ï¼Œé‡‡ç”¨ LVGL å›¾å½¢åº“å¼€å‘ã€‚æä¾›ä¸“ä¸šçº§çš„ç”¨æˆ·ç•Œé¢å’Œå“è¶Šçš„éŸ³é¢‘ä½“éªŒï¼Œæ”¯æŒ MP3/WAV æ ¼å¼ã€Wi-Fi è¿æ¥å’Œæ™ºèƒ½æ’­æ”¾åˆ—è¡¨ç®¡ç†ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æ„å»ºæŒ‡å—](#æ„å»ºæŒ‡å—)
- [éƒ¨ç½²è¿è¡Œ](#éƒ¨ç½²è¿è¡Œ)
- [è¿›åº¦æ¡åŠŸèƒ½è¯¦è§£](#è¿›åº¦æ¡åŠŸèƒ½è¯¦è§£)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [è‡ªå®šä¹‰æŒ‡å—](#è‡ªå®šä¹‰æŒ‡å—)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [API å‚è€ƒ](#api-å‚è€ƒ)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## é¡¹ç›®ç®€ä»‹

Vela é«˜çº§éŸ³ä¹æ’­æ”¾å™¨æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åµŒå…¥å¼éŸ³ä¹æ’­æ”¾å™¨ï¼Œä¸“ä¸º OpenVela ç³»ç»Ÿè®¾è®¡ã€‚å®ƒæä¾›äº†ç°ä»£åŒ–çš„ UI ç•Œé¢ï¼Œæ”¯æŒé«˜è´¨é‡éŸ³é¢‘æ’­æ”¾ã€æ™ºèƒ½æ’­æ”¾åˆ—è¡¨ç®¡ç†ã€å¯åŠ¨é¡µé¢ã€éŸ³é‡æ§åˆ¶ç­‰åŠŸèƒ½ã€‚åº”ç”¨ç¨‹åºé‡‡ç”¨å…ˆè¿›çš„æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤ã€‚

**å½“å‰ç‰ˆæœ¬ç‰¹è‰²**ï¼š
- å†…ç½®éŸ³é¢‘æ¨¡æ‹Ÿå™¨
- è½»é‡çº§è®¾è®¡
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºäºŒæ¬¡å¼€å‘

### ä¸»è¦äº®ç‚¹

- **ç°ä»£åŒ–è®¾è®¡**ï¼šé€‚åº”å¤šç§ä½¿ç”¨ç¯å¢ƒçš„ç°ä»£åŒ–ç•Œé¢
- **é«˜çº§ UI ç³»ç»Ÿ**ï¼šåŸºäº LVGL çš„ç²¾ç¾å›¾å½¢ç•Œé¢ï¼ŒåŒ…å«å¯åŠ¨é¡µé¢ã€ä¸»ç•Œé¢ã€æ’­æ”¾åˆ—è¡¨
- **å¤šæ ¼å¼éŸ³é¢‘**ï¼šæ”¯æŒ MP3 å’Œ WAV æ ¼å¼éŸ³é¢‘æ–‡ä»¶æ’­æ”¾
- **æ¨¡æ‹Ÿå™¨æ”¯æŒ**ï¼šå†…ç½®éŸ³é¢‘æ§åˆ¶æ¨¡æ‹Ÿå™¨ï¼Œä¾¿äºå¼€å‘è°ƒè¯•
- **è§¦å±å‹å¥½**ï¼šå®Œæ•´çš„è§¦å±æ“ä½œæ”¯æŒï¼Œé€‚é…é•¿æ–¹å½¢æ¨¡æ‹Ÿå™¨
- **ç½‘ç»œåŠŸèƒ½**ï¼šå†…ç½® Wi-Fi è¿æ¥ç®¡ç†
- **è½»é‡çº§è®¾è®¡**ï¼šä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œæ ˆå¤§å°ä»…16KB
- **æ¨¡å—åŒ–æ¶æ„**ï¼šå¯åŠ¨é¡µé¢ã€æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨ç‹¬ç«‹æ¨¡å—è®¾è®¡
- **ä¸“ä¸šæ’­æ”¾åˆ—è¡¨**ï¼šé«˜çº§æ’­æ”¾åˆ—è¡¨ç®¡ç†ï¼Œæ”¯æŒæœç´¢ã€æ’åºã€åŠ¨ç”»
- **ä¸“ä¸šçº§è¿›åº¦æ¡**ï¼šæ”¯æŒæ‹–æ‹½æ§åˆ¶ã€å¹³æ»‘åŠ¨ç”»å’Œå®æ—¶é¢„è§ˆ

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- éŸ³é¢‘æ’­æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœ/åœæ­¢ï¼‰
- ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–åˆ‡æ¢
- æ™ºèƒ½éŸ³é‡è°ƒèŠ‚æ§åˆ¶
- é«˜çº§æ’­æ”¾åˆ—è¡¨ç®¡ç†ï¼ˆç‹¬ç«‹æ¨¡å—ï¼‰
- å®æ—¶æ’­æ”¾è¿›åº¦æ˜¾ç¤º
- é¡¶éƒ¨çŠ¶æ€æ ï¼ˆæ—¶é—´ã€æ—¥æœŸã€Wi-Fiã€ç”µæ± ï¼‰
- å¤šæ ¼å¼éŸ³é¢‘æ”¯æŒï¼ˆMP3/WAVï¼‰
- **ä¸“ä¸šçº§è¿›åº¦æ¡æ§åˆ¶**ï¼šæ‹–æ‹½é¢„è§ˆã€å¹³æ»‘ç§»åŠ¨ã€å¤šæ¨¡å¼äº¤äº’

### ç•Œé¢åŠŸèƒ½
- **ä¸“ä¸šç•Œé¢**ï¼šç°ä»£åŒ–é£æ ¼è®¾è®¡
- **å¯åŠ¨é¡µé¢**ï¼šå“ç‰Œ Logo åŠ¨ç”»å’ŒåŠ è½½æ•ˆæœ
- **åŠ¨æ€ä¸“è¾‘å°é¢**ï¼šåœ†å½¢å°é¢å®¹å™¨ï¼Œå®Œæ•´å›¾ç‰‡æ˜¾ç¤º
- **é•¿æ–¹å½¢é€‚é…**ï¼šä¸“ä¸ºæ¨¡æ‹Ÿå™¨é•¿æ–¹å½¢å±å¹•ä¼˜åŒ–
- **é«˜çº§æ ·å¼ç³»ç»Ÿ**ï¼šç£¨ç ‚ç»ç’ƒã€æ¸å˜ã€éœ“è™¹è“ä¸»é¢˜
- **æ™ºèƒ½æ’­æ”¾åˆ—è¡¨**ï¼šæœç´¢ã€æ’åºã€åŠ¨ç”»æ•ˆæœ
- **ä¸“ä¸šéŸ³é‡æ¡**ï¼šå¯è§†åŒ–éŸ³é‡æ§åˆ¶
- **æ»šåŠ¨æ­Œæ›²ä¿¡æ¯**ï¼šé•¿æ ‡é¢˜è‡ªåŠ¨æ»šåŠ¨æ˜¾ç¤º

### ç³»ç»ŸåŠŸèƒ½
- Wi-Fi ç½‘ç»œè¿æ¥ç®¡ç†
- å®Œæ•´æ–‡ä»¶ç³»ç»Ÿé›†æˆ
- JSON é…ç½®æ–‡ä»¶ç®¡ç†
- ç³»ç»Ÿèµ„æºå®æ—¶ç›‘æ§
- æ¨¡å—åŒ–æ¶æ„è®¾è®¡
- é«˜æ€§èƒ½éŸ³é¢‘è§£ç ï¼ˆlibmadï¼‰

## ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

#### å¹³å°ï¼šSTM32H750B-DK

**å¤„ç†å™¨å‚æ•°**ï¼š
- **ä¸»é¢‘**ï¼š480MHz
- **å†…æ ¸**ï¼šARM Cortex-M7
- **RAM**ï¼š1MB
- **Flash**ï¼š128KB
- **SDRAM**ï¼š128MB

**éŸ³é¢‘æ¥å£**ï¼š
- **æ¥å£ç±»å‹**ï¼šI2S æ¥å£
- **é‡‡æ ·ç²¾åº¦**ï¼š16bit/24bit é‡‡æ ·
- **é‡‡æ ·ç‡**ï¼š8kHz-48kHz é‡‡æ ·ç‡

**æ˜¾ç¤ºæ¥å£**ï¼š
- **å±å¹•å°ºå¯¸**ï¼š4.3å¯¸ LCD
- **åˆ†è¾¨ç‡**ï¼š480x272 åˆ†è¾¨ç‡
- **æ¥å£ç±»å‹**ï¼šRGB æ¥å£

**å­˜å‚¨æ¥å£**ï¼š
- **å­˜å‚¨ç±»å‹**ï¼šSDå¡æ¥å£
- **å®¹é‡è¦æ±‚**ï¼šâ‰«8GB å®¹é‡
- **é€Ÿåº¦ç­‰çº§**ï¼šClass 10 é€Ÿåº¦

#### é€šç”¨ç¡¬ä»¶è¦æ±‚
- **å¤„ç†å™¨**ï¼šARM Cortex-A7 æˆ–æ›´é«˜
- **å†…å­˜**ï¼šè‡³å°‘ 128MB RAM
- **å­˜å‚¨**ï¼šè‡³å°‘ 256MB é—ªå­˜
- **æ˜¾ç¤º**ï¼š1280x800 åˆ†è¾¨ç‡è§¦æ‘¸å±
- **éŸ³é¢‘**ï¼šPCM éŸ³é¢‘è¾“å‡ºæ”¯æŒ

### è½¯ä»¶è¦æ±‚

#### åŸºç¡€è½¯ä»¶ä¾èµ–
- **æ“ä½œç³»ç»Ÿ**ï¼šOpenVela
- **å›¾å½¢åº“**ï¼šLVGL 8.x
- **éŸ³é¢‘åº“**ï¼šNuttX Audio æ¡†æ¶ / æ¨¡æ‹Ÿå™¨éŸ³é¢‘æ§åˆ¶å™¨
- **ç½‘ç»œ**ï¼šWi-Fi é©±åŠ¨æ”¯æŒ

#### STM32H750B-DK è½¯ä»¶ä¾èµ–
- **OpenVela SDK**ï¼šå®Œæ•´å¼€å‘å¥—ä»¶
- **LVGL å›¾å½¢åº“**ï¼šé«˜æ€§èƒ½ GUI åº“
- **libmad éŸ³é¢‘åº“**ï¼šMP3 è§£ç åº“
- **ARM GCC å·¥å…·é“¾**ï¼šäº¤å‰ç¼–è¯‘å™¨
- **STM32CubeProgrammer**ï¼šçƒ§å†™å·¥å…·

### å¼€å‘ç¯å¢ƒ

#### å¼€å‘ç¯å¢ƒ
- **ç¼–è¯‘å™¨**ï¼šarm-none-eabi-gcc
- **æ„å»ºç³»ç»Ÿ**ï¼šMake / NuttX æ„å»ºç³»ç»Ÿ
- **è°ƒè¯•å·¥å…·**ï¼šADB
- **ä¸»æœºç³»ç»Ÿ**ï¼šLinux (æ¨è Ubuntu 22.04)
- **æ¨¡æ‹Ÿå™¨**ï¼šQEMU (ç”¨äºæµ‹è¯•)

#### STM32H750B-DK å¼€å‘ç¯å¢ƒ
- **äº¤å‰ç¼–è¯‘ç¯å¢ƒ**ï¼šARM GCC äº¤å‰å·¥å…·é“¾
- **STM32CubeIDE**ï¼šé›†æˆå¼€å‘ç¯å¢ƒ
- **ST-LINK è°ƒè¯•å™¨**ï¼šç¡¬ä»¶è°ƒè¯•å·¥å…·
- **Git ç‰ˆæœ¬æ§åˆ¶**ï¼šæºä»£ç ç®¡ç†
- **LVGL æ¨¡æ‹Ÿå™¨**ï¼šPC ç«¯ç•Œé¢æµ‹è¯•å·¥å…·

## é¡¹ç›®ç»“æ„

```
music_player/
â”œâ”€â”€ æ ¸å¿ƒæ¨¡å—/                      # ä¸»è¦åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ music_player.c           # ä¸»åº”ç”¨é€»è¾‘å’ŒUIç•Œé¢
â”‚   â”œâ”€â”€ music_player.h           # ä¸»åº”ç”¨å¤´æ–‡ä»¶å’Œæ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ music_player_main.c      # åº”ç”¨ç¨‹åºå…¥å£ç‚¹
â”‚   â”œâ”€â”€ splash_screen.c          # å¯åŠ¨é¡µé¢æ¨¡å—ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€â”€ playlist_manager.c       # æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â””â”€â”€ playlist_manager.h       # æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨å¤´æ–‡ä»¶
â”œâ”€â”€ éŸ³é¢‘å¤„ç†æ¨¡å—/                  # éŸ³é¢‘ç›¸å…³ä»£ç 
â”‚   â”œâ”€â”€ audio_ctl.c              # éŸ³é¢‘æ§åˆ¶
â”‚   â””â”€â”€ audio_ctl.h              # éŸ³é¢‘æ§åˆ¶å¤´æ–‡ä»¶
â”œâ”€â”€ å­—ä½“é…ç½®æ¨¡å—/                  # å­—ä½“ç³»ç»Ÿ
â”‚   â”œâ”€â”€ font_config.c            # å­—ä½“é…ç½®å®ç°
â”‚   â””â”€â”€ font_config.h            # å­—ä½“é…ç½®å¤´æ–‡ä»¶
â”œâ”€â”€ ç½‘ç»œæ¨¡å—/                      # ç½‘ç»œè¿æ¥ä»£ç 
â”‚   â”œâ”€â”€ wifi.c                   # Wi-Fi ç®¡ç†æ¨¡å—
â”‚   â””â”€â”€ wifi.h                   # Wi-Fi ç®¡ç†å¤´æ–‡ä»¶
â”œâ”€â”€ res/                         # èµ„æºæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ fonts/                   # å­—ä½“æ–‡ä»¶
â”‚   â”œâ”€â”€ icons/                   # å›¾æ ‡æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ audio.png           # éŸ³é¢‘å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ music.png           # éŸ³ä¹å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ mute.png            # é™éŸ³å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ next.png            # ä¸‹ä¸€é¦–å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ nocover.png         # æ— å°é¢å ä½å›¾
â”‚   â”‚   â”œâ”€â”€ pause.png           # æš‚åœå›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ play.png            # æ’­æ”¾å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ playlist.png        # æ’­æ”¾åˆ—è¡¨å›¾æ ‡
â”‚   â”‚   â””â”€â”€ previous.png        # ä¸Šä¸€é¦–å›¾æ ‡
â”‚   â”œâ”€â”€ musics/                  # éŸ³ä¹æ–‡ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ manifest.json       # éŸ³ä¹åˆ—è¡¨é…ç½®ï¼ˆåŒ…å«2é¦–ç¤ºä¾‹æ­Œæ›²ï¼‰
â”‚   â”‚   â”œâ”€â”€ Love Story.mp3      # MP3éŸ³é¢‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Love Story.png      # ä¸“è¾‘å°é¢
â”‚   â”‚   â”œâ”€â”€ Take me  hand.mp3   # MP3éŸ³é¢‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Take me hand.png    # ä¸“è¾‘å°é¢
â”‚   â”‚   â””â”€â”€ music_page.png      # éŸ³ä¹é¡µé¢å›¾æ ‡
â”‚   â””â”€â”€ config.json             # å…¨å±€é…ç½®æ–‡ä»¶ï¼ˆWi-Fiç­‰ï¼‰
â”œâ”€â”€ æ„å»ºé…ç½®/                      # æ„å»ºç³»ç»Ÿæ–‡ä»¶
â”‚   â”œâ”€â”€ Kconfig                 # å†…æ ¸é…ç½®é€‰é¡¹
â”‚   â”œâ”€â”€ Makefile                # ä¸»æ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ Make.defs               # æ„å»ºå®šä¹‰
â”‚   â””â”€â”€ Make.dep                # æ„å»ºä¾èµ–
â””â”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### 1. music_player.c/h - ä¸»åº”ç”¨æ¨¡å—
- **åŠŸèƒ½**ï¼šåº”ç”¨ç¨‹åºä¸»é€»è¾‘å’ŒUIç•Œé¢
- **èŒè´£**ï¼šUIç®¡ç†ã€çŠ¶æ€æ§åˆ¶ã€äº‹ä»¶å¤„ç†ã€æ—¶é—´æ—¥æœŸæ˜¾ç¤º
- **å…³é”®ç‰¹æ€§**ï¼š
  - ç°ä»£åŒ–ç•Œé¢è®¾è®¡ï¼ˆæ·±ç©ºç°èƒŒæ™¯ã€éœ“è™¹è“ä¸»é¢˜ï¼‰
  - é¡¶éƒ¨çŠ¶æ€æ ï¼ˆWi-Fiã€ç”µæ± ã€æ—¶é—´ã€æ—¥æœŸï¼‰
  - åœ†å½¢ä¸“è¾‘å°é¢å®¹å™¨ï¼Œå®Œæ•´å›¾ç‰‡æ˜¾ç¤º
  - æ»šåŠ¨æ­Œæ›²ä¿¡æ¯æ˜¾ç¤º
  - é«˜çº§æ ·å¼ç³»ç»Ÿï¼ˆç£¨ç ‚ç»ç’ƒã€æ¸å˜æ•ˆæœï¼‰
  - **ä¸“ä¸šçº§è¿›åº¦æ¡ç³»ç»Ÿ**ï¼šæ‹–æ‹½æ§åˆ¶ã€å¹³æ»‘åŠ¨ç”»ã€å®æ—¶é¢„è§ˆ
- **å…³é”®ç»“æ„**ï¼š
  - `struct ctx_s`ï¼šè¿è¡Œæ—¶ä¸Šä¸‹æ–‡
  - `struct resource_s`ï¼šUI èµ„æºç®¡ç†
  - `album_info_t`ï¼šä¸“è¾‘ä¿¡æ¯ç»“æ„

#### 2. splash_screen.c - å¯åŠ¨é¡µé¢æ¨¡å—ï¼ˆç‹¬ç«‹ï¼‰
- **åŠŸèƒ½**ï¼šå“ç‰Œå¯åŠ¨é¡µé¢å’ŒåŠ è½½åŠ¨ç”»
- **èŒè´£**ï¼šåº”ç”¨å¯åŠ¨æ—¶çš„å“ç‰Œå±•ç¤ºå’Œç”¨æˆ·ä½“éªŒ

#### 3. playlist_manager.c/h - æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨ï¼ˆç‹¬ç«‹ï¼‰
- **åŠŸèƒ½**ï¼šä¸“ä¸šæ’­æ”¾åˆ—è¡¨ç®¡ç†
- **èŒè´£**ï¼šæ’­æ”¾åˆ—è¡¨æ˜¾ç¤ºã€æœç´¢ã€æ’åºã€äº¤äº’

#### 4. audio_ctl_simulator.c/h - éŸ³é¢‘å¤„ç†æ¨¡å—
- **åŠŸèƒ½**ï¼šå¤šæ ¼å¼éŸ³é¢‘æ§åˆ¶æ¨¡å—ï¼ˆæ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ï¼‰
- **èŒè´£**ï¼šéŸ³é¢‘æ’­æ”¾ã€æš‚åœã€åœæ­¢ã€éŸ³é‡æ§åˆ¶ã€æ ¼å¼è§£ç 
- **æ”¯æŒæ ¼å¼**ï¼šMP3ã€WAV éŸ³é¢‘æ–‡ä»¶

#### 5. font_config.c/h - å­—ä½“é…ç½®æ¨¡å—
- **åŠŸèƒ½**ï¼šç»Ÿä¸€å­—ä½“é…ç½®ç®¡ç†
- **èŒè´£**ï¼šå­—ä½“åŠ è½½ã€é…ç½®ã€UTF-8æ”¯æŒ

#### 6. wifi.c/h - ç½‘ç»œæ¨¡å—
- **åŠŸèƒ½**ï¼šWi-Fi è¿æ¥ç®¡ç†
- **èŒè´£**ï¼šç½‘ç»œè¿æ¥ã€é…ç½®ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…å¿…è¦çš„å·¥å…·
sudo apt update
sudo apt install -y android-tools-adb build-essential git

# å…‹éš† OpenVela ä»“åº“
git clone <openvela-repo-url>
cd vela_code
```

### 2. é…ç½®é¡¹ç›®

```bash
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd /root/vela_code

# é…ç½®éŸ³ä¹æ’­æ”¾å™¨
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap menuconfig

# æˆ–è€…ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶
echo "CONFIG_LVX_USE_DEMO_MUSIC_PLAYER=y" >> vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap/defconfig
echo 'CONFIG_LVX_MUSIC_PLAYER_DATA_ROOT="/data"' >> vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap/defconfig
```

### 3. ç¼–è¯‘é¡¹ç›®

```bash
# æ¸…ç†æ„å»ºäº§ç‰©
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap distclean -j8

# å¼€å§‹æ„å»º
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap -j8
```

### 4. å¯åŠ¨æ¨¡æ‹Ÿå™¨

```bash
# åˆ›å»º nuttx ç¬¦å·é“¾æ¥ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
cd nuttx && ln -sf vela_ap.elf nuttx && cd ..

# å¯åŠ¨æ¨¡æ‹Ÿå™¨
./emulator.sh vela
```

### 5. éƒ¨ç½²èµ„æº

```bash
# ç­‰å¾…æ¨¡æ‹Ÿå™¨å¯åŠ¨
sleep 15

# è¿æ¥ ADB
adb connect 127.0.0.1:5555

# æ¨é€èµ„æºæ–‡ä»¶
adb -s emulator-5554 push apps/packages/demos/music_player/res /data/
```

### 6. è¿è¡Œåº”ç”¨

```bash
# é€šè¿‡ ADB Shell å¯åŠ¨éŸ³ä¹æ’­æ”¾å™¨
adb -s emulator-5554 shell "music_player &"
```

## âš™ï¸ é…ç½®è¯´æ˜

### config.json é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰

```json
{
  "wifi": {
    "ssid": "vela_network",       // Wi-Fi ç½‘ç»œåç§°
    "pswd": "vela123456"          // Wi-Fi å¯†ç 
  }
}
```

### manifest.json éŸ³ä¹é…ç½®ï¼ˆå½“å‰åŒ…å«2é¦–ç¤ºä¾‹æ­Œæ›²ï¼‰

```json
{
  "musics": [
    {
      "path": "Love Story.mp3",
      "name": "Love Story",
      "artist": "Taylor Swift",
      "cover": "Love Story.png",
      "total_time": 236000,
      "color": "#FFB6C1"
    },
    {
      "path": "Take me  hand.mp3",
      "name": "Take My Hand",
      "artist": "The Cab",
      "cover": "Take me hand.png",
      "total_time": 254198,
      "color": "#4169E1"
    }
  ]
}
```

**éŸ³ä¹åº“ç‰¹ç‚¹**ï¼š
- âœ… æ”¯æŒ MP3 æ ¼å¼éŸ³é¢‘æ–‡ä»¶
- âœ… åŒ…å«ä¸¤é¦–ç¤ºä¾‹æ­Œæ›²ç”¨äºæ¼”ç¤º
- âœ… ä½¿ç”¨çœŸå®è‰ºæœ¯å®¶åç§°
- âœ… æä¾›å‡†ç¡®çš„æ­Œæ›²æ—¶é•¿ä¿¡æ¯

### Kconfig é…ç½®é€‰é¡¹

```kconfig
# åŸºç¡€é…ç½®
CONFIG_LVX_USE_DEMO_MUSIC_PLAYER=y             # å¯ç”¨éŸ³ä¹æ’­æ”¾å™¨
CONFIG_LVX_MUSIC_PLAYER_DATA_ROOT="/data" # æ•°æ®æ ¹ç›®å½•
CONFIG_LVX_MUSIC_PLAYER_STACKSIZE=16384        # åº”ç”¨æ ˆå¤§å°
CONFIG_LVX_MUSIC_PLAYER_PRIORITY=100           # åº”ç”¨ä¼˜å…ˆçº§

# LVGL å›¾å½¢é…ç½®
CONFIG_GRAPHICS_LVGL=y                         # å¯ç”¨LVGLå›¾å½¢åº“
CONFIG_LV_COLOR_DEPTH_32=y                     # 32ä½é¢œè‰²æ·±åº¦
CONFIG_LV_USE_CLIB_MALLOC=y                    # ä½¿ç”¨Cåº“å†…å­˜ç®¡ç†
CONFIG_LV_USE_LOG=y                            # å¯ç”¨LVGLæ—¥å¿—

# LVGL å­—ä½“é…ç½®
CONFIG_LV_FONT_MONTSERRAT_16=y                 # 16å·å­—ä½“
CONFIG_LV_FONT_MONTSERRAT_22=y                 # 22å·å­—ä½“  
CONFIG_LV_FONT_MONTSERRAT_24=y                 # 24å·å­—ä½“
CONFIG_LV_FONT_MONTSERRAT_32=y                 # 32å·å­—ä½“

# ç³»ç»Ÿæ”¯æŒé…ç½®
CONFIG_BUILTIN=y                               # å¯ç”¨å†…å»ºåº”ç”¨æ”¯æŒ
CONFIG_NSH_BUILTIN_APPS=y                      # å¯ç”¨NSHå†…å»ºåº”ç”¨
```

## ğŸ”¨ æ„å»ºæŒ‡å—

### æ„å»ºç³»ç»Ÿæ¦‚è¿°

é¡¹ç›®ä½¿ç”¨ NuttX æ„å»ºç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹å…³é”®æ–‡ä»¶ï¼š

#### Makefile
```makefile
-include $(APPDIR)/Make.defs

ifeq ($(CONFIG_LVX_USE_DEMO_MUSIC_PLAYER), y)
PROGNAME = music_player          # ç¨‹åºåç§°
PRIORITY = 100                   # ä¼˜å…ˆçº§
STACKSIZE = 16384               # æ ˆå¤§å°ï¼ˆå­—èŠ‚ï¼‰
MODULE = $(CONFIG_LVX_USE_DEMO_MUSIC_PLAYER)

# éŸ³ä¹æ’­æ”¾å™¨æºæ–‡ä»¶ - ä½¿ç”¨æ¨¡æ‹Ÿå™¨å…¼å®¹ç‰ˆæœ¬
CSRCS = music_player.c audio_ctl_simulator.c wifi.c splash_screen.c playlist_manager.c font_config.c

# ä¸»å…¥å£æ–‡ä»¶
MAINSRC = music_player_main.c

# æ¨¡æ‹Ÿå™¨ç¯å¢ƒé…ç½®
CFLAGS += -DUSING_SIMULATOR_AUDIO=1

# åŸºç¡€åº“é“¾æ¥
LDLIBS += -lm -lpthread

endif

include $(TOPDIR)/../apps/Application.mk
```

### æ„å»ºé€‰é¡¹

#### è°ƒè¯•ç‰ˆæœ¬
```bash
# å¯ç”¨è°ƒè¯•ç¬¦å·
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap DEBUG=1 -j8
```

#### å‘å¸ƒç‰ˆæœ¬
```bash
# ä¼˜åŒ–æ„å»º
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap OPTIMIZE=2 -j8
```

#### æ¸…ç†æ„å»º
```bash
# å®Œå…¨æ¸…ç†
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap distclean

# ä»…æ¸…ç†éŸ³ä¹æ’­æ”¾å™¨
make -C apps/packages/demos/music_player clean
```

## ğŸš¢ éƒ¨ç½²è¿è¡Œ

### æ¨¡æ‹Ÿå™¨éƒ¨ç½²

#### 1. å¯åŠ¨æ¨¡æ‹Ÿå™¨
```bash
# å¯åŠ¨ QEMU æ¨¡æ‹Ÿå™¨
./emulator.sh vela

# æ£€æŸ¥æ¨¡æ‹Ÿå™¨çŠ¶æ€
ps aux | grep qemu
```

#### 2. ADB è¿æ¥
```bash
# æ£€æŸ¥ ADB æœåŠ¡
adb devices

# è¿æ¥åˆ°æ¨¡æ‹Ÿå™¨
adb connect 127.0.0.1:5555

# éªŒè¯è¿æ¥
adb -s emulator-5554 shell uname -a
```

#### 3. æ–‡ä»¶ä¼ è¾“
```bash
# åˆ›å»ºç›®æ ‡ç›®å½•
adb -s emulator-5554 shell mkdir -p /data/res

# æ¨é€èµ„æºæ–‡ä»¶
adb -s emulator-5554 push res/ /data/

# éªŒè¯æ–‡ä»¶
adb -s emulator-5554 shell ls -la /data/res/
```

## ğŸ›ï¸ è¿›åº¦æ¡åŠŸèƒ½è¯¦è§£

### åŠŸèƒ½æ¦‚è¿°

éŸ³ä¹æ’­æ”¾å™¨é…å¤‡äº†**ä¸“ä¸šçº§è¿›åº¦æ¡ç³»ç»Ÿ**ï¼Œæä¾›ç°ä»£éŸ³ä¹åº”ç”¨æ‰€éœ€çš„å…¨éƒ¨é«˜çº§äº¤äº’åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ‹–æ‹½æ§åˆ¶ã€å¹³æ»‘åŠ¨ç”»å’Œå®æ—¶é¢„è§ˆã€‚

### æ ¸å¿ƒç‰¹æ€§

#### 1. æ™ºèƒ½æ‹–æ‹½æ§åˆ¶ ğŸ›ï¸
- **å®æ—¶é¢„è§ˆ**: æ‹–æ‹½è¿‡ç¨‹ä¸­å®æ—¶æ˜¾ç¤ºé¢„è§ˆæ—¶é—´ï¼Œä¸ä¼šç«‹å³è·³è½¬
- **é˜²æŠ–å¤„ç†**: 60fpsèŠ‚æµæœºåˆ¶ï¼Œé¿å…è¿‡åº¦æ›´æ–°å½±å“æ€§èƒ½
- **æ™ºèƒ½è¾¹ç•Œ**: 20åƒç´ å®¹å¿åº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **çŠ¶æ€ä¿æŠ¤**: è‡ªåŠ¨è®°å½•æ‹–æ‹½å‰æ’­æ”¾çŠ¶æ€ï¼Œé‡Šæ”¾åæ™ºèƒ½æ¢å¤

#### 2. å¹³æ»‘åŠ¨ç”»ç§»åŠ¨ âœ¨
- **Ease-outåŠ¨ç”»**: 200mså¹³æ»‘è¿‡æ¸¡ï¼Œè‡ªç„¶æµç•…
- **æ™ºèƒ½åˆ¤æ–­**: å¤§äº2ç§’å·®è·æ‰å¯ç”¨åŠ¨ç”»ï¼Œå°å·®è·ç›´æ¥æ›´æ–°
- **å†²çªé¿å…**: æ‹–æ‹½æ—¶è‡ªåŠ¨æš‚åœåŠ¨ç”»ï¼Œé¿å…äº¤äº’å†²çª
- **æ€§èƒ½ä¼˜åŒ–**: åªåœ¨å¿…è¦æ—¶å¯åŠ¨åŠ¨ç”»ï¼ŒèŠ‚çœèµ„æº

#### 3. å¢å¼ºè§†è§‰åé¦ˆ ğŸ¨
- **åŠ¨æ€æ ·å¼**: æ‹–æ‹½æ—¶è¿›åº¦æ¡å˜ç²—ã€é¢œè‰²æ”¹å˜ã€æ·»åŠ é˜´å½±
- **é•¿æŒ‰æ¨¡å¼**: é•¿æŒ‰è¿›å…¥ç²¾ç¡®è°ƒèŠ‚æ¨¡å¼ï¼Œæ›´å¼ºçƒˆçš„è§†è§‰åé¦ˆ
- **çŠ¶æ€æŒ‡ç¤º**: æ¸…æ™°çš„è§†è§‰çŠ¶æ€åé¦ˆï¼Œç”¨æˆ·æ“ä½œä¸€ç›®äº†ç„¶

#### 4. å¥å£®é”™è¯¯å¤„ç† ğŸ›¡ï¸
- **çŠ¶æ€æ£€æŸ¥**: å…¨é¢çš„ç©ºæŒ‡é’ˆå’ŒçŠ¶æ€éªŒè¯
- **ä¼˜é›…é™çº§**: Seekå¤±è´¥æ—¶è‡ªåŠ¨æ¢å¤åŸçŠ¶æ€
- **æ„å¤–æ¢å¤**: ç„¦ç‚¹ä¸¢å¤±æ—¶å®‰å…¨æ¢å¤æ‰€æœ‰çŠ¶æ€
- **å†…å­˜å®‰å…¨**: å®Œå–„çš„èµ„æºç®¡ç†å’Œæ¸…ç†æœºåˆ¶

### æŠ€æœ¯å®ç°

#### çŠ¶æ€ç®¡ç†ç»“æ„
```c
typedef struct {
    bool is_seeking;                // æ‹–æ‹½çŠ¶æ€æ ‡è®°
    bool was_playing;              // æ‹–æ‹½å‰æ’­æ”¾çŠ¶æ€
    uint64_t seek_preview_time;    // é¢„è§ˆæ—¶é—´
    uint32_t last_update_tick;     // èŠ‚æµæ—¶é—´æˆ³
    lv_anim_t smooth_anim;         // å¹³æ»‘åŠ¨ç”»å¯¹è±¡
    bool smooth_update_enabled;    // å¹³æ»‘æ›´æ–°å¼€å…³
    int32_t target_value;          // åŠ¨ç”»ç›®æ ‡å€¼
    int32_t current_value;         // å½“å‰å€¼
} progress_bar_state_t;
```

#### å…³é”®äº‹ä»¶å¤„ç†
1. **LV_EVENT_PRESSED**: è¿›å…¥æ‹–æ‹½æ¨¡å¼ï¼Œæš‚åœå®šæ—¶å™¨ï¼Œåº”ç”¨è§†è§‰åé¦ˆ
2. **LV_EVENT_PRESSING**: å®æ—¶é¢„è§ˆæ›´æ–°ï¼Œ60fpsèŠ‚æµä¼˜åŒ–
3. **LV_EVENT_RELEASED**: æ‰§è¡Œå®é™…seekï¼Œæ¢å¤æ’­æ”¾çŠ¶æ€
4. **LV_EVENT_CLICKED**: å•å‡»å¿«é€Ÿè·³è½¬ï¼Œå¹³æ»‘åŠ¨ç”»
5. **LV_EVENT_PRESS_LOST**: æ„å¤–ä¸­æ–­å®‰å…¨æ¢å¤
6. **LV_EVENT_LONG_PRESSED**: ç²¾ç¡®è°ƒèŠ‚æ¨¡å¼

#### æ ¸å¿ƒAPI
```c
// å¹³æ»‘æ›´æ–°æ§åˆ¶
static void set_progress_smooth_update(bool enabled);

// çŠ¶æ€é‡ç½®
static void reset_progress_bar_state(void);

// åŠ¨ç”»å¯åŠ¨
static void start_smooth_progress_animation(int32_t target_value);

// ä¸»äº‹ä»¶å¤„ç†å™¨
static void app_playback_progress_bar_event_handler(lv_event_t* e);
```


## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

#### æ’­æ”¾æ§åˆ¶
1. **æ’­æ”¾/æš‚åœ**: ç‚¹å‡»ä¸­å¤®æ’­æ”¾æŒ‰é’®
2. **ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–**: ç‚¹å‡»å·¦å³ç®­å¤´æŒ‰é’®
3. **éŸ³é‡æ§åˆ¶**: ç‚¹å‡»éŸ³é‡æŒ‰é’®æ˜¾ç¤ºéŸ³é‡æ¡

#### è¿›åº¦æ¡æ“ä½œæŒ‡å—

##### 1. åŸºæœ¬æ‹–æ‹½æ“ä½œ
1. **æŒ‰ä½è¿›åº¦æ¡**: è¿›åº¦æ¡å˜ç²—å˜è“ï¼Œè¿›å…¥æ‹–æ‹½æ¨¡å¼
2. **æ‹–åŠ¨æ‰‹æŒ‡**: å®æ—¶é¢„è§ˆæ—¶é—´ï¼Œä¸ä¼šç«‹å³è·³è½¬
3. **é‡Šæ”¾æ‰‹æŒ‡**: æ‰§è¡Œå®é™…è·³è½¬åˆ°ç›®æ ‡ä½ç½®

##### 2. å¿«é€Ÿè·³è½¬
- **å•å‡»è¿›åº¦æ¡ä»»æ„ä½ç½®**: ç«‹å³è·³è½¬åˆ°è¯¥ä½ç½®ï¼Œå¸¦å¹³æ»‘åŠ¨ç”»æ•ˆæœ

##### 3. æ’­æ”¾çŠ¶æ€æ™ºèƒ½ç®¡ç†
- æ‹–æ‹½æ—¶è‡ªåŠ¨è®°å½•æ’­æ”¾çŠ¶æ€
- é‡Šæ”¾åæ™ºèƒ½æ¢å¤åŸæ¥çš„æ’­æ”¾/æš‚åœçŠ¶æ€
- é¿å…æ‹–æ‹½æ“ä½œå½±å“éŸ³ä¹æ’­æ”¾æµç¨‹

#### æ’­æ”¾åˆ—è¡¨æ“ä½œ
1. **æ‰“å¼€æ’­æ”¾åˆ—è¡¨**: ç‚¹å‡»æ’­æ”¾åˆ—è¡¨æŒ‰é’®
2. **é€‰æ‹©æ­Œæ›²**: åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»æƒ³è¦æ’­æ”¾çš„æ­Œæ›²
3. **å…³é—­æ’­æ”¾åˆ—è¡¨**: ç‚¹å‡»èƒŒæ™¯åŒºåŸŸæˆ–å…¶ä»–æ§ä»¶

### å¼€å‘è€…é€‰é¡¹

#### è°ƒè¯•æ¨¡å¼
åœ¨ç¼–è¯‘æ—¶æ·»åŠ  `-DDEBUG` æ ‡å¿—å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š
```bash
make CFLAGS="-DDEBUG"
```

è°ƒè¯•æ¨¡å¼å°†è¾“å‡ºè¯¦ç»†çš„æ“ä½œæ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- æ‹–æ‹½å¼€å§‹/ç»“æŸçŠ¶æ€
- é¢„è§ˆä½ç½®ä¿¡æ¯
- Seekæ“ä½œç»“æœ
- åŠ¨ç”»å¯åœçŠ¶æ€

#### æ€§èƒ½ä¼˜åŒ–é€‰é¡¹
å¼€å‘è€…å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–æ€§èƒ½ï¼š

1. **å…³é—­å¹³æ»‘åŠ¨ç”»**ï¼ˆèŠ‚çœèµ„æºï¼‰:
```c
set_progress_smooth_update(false);
```

2. **è°ƒæ•´èŠ‚æµé¢‘ç‡**ï¼ˆä¿®æ”¹æºç ï¼‰:
```c
// åœ¨ LV_EVENT_PRESSING å¤„ç†ä¸­ä¿®æ”¹èŠ‚æµé˜ˆå€¼
if (current_tick - progress_state.last_update_tick < 16) // 60fps
```

3. **è°ƒæ•´åŠ¨ç”»æ—¶é•¿**ï¼ˆä¿®æ”¹æºç ï¼‰:
```c
lv_anim_set_duration(&progress_state.smooth_anim, 200); // æ¯«ç§’
```

### æ—¥å¿—ç›‘æ§

#### å…³é”®æ—¥å¿—ä¿¡æ¯
- `ğŸšï¸ å¼€å§‹æ‹–æ‹½è¿›åº¦æ¡`: æ‹–æ‹½å¼€å§‹
- `ğŸµ é¢„è§ˆä½ç½®: MM:SS`: æ‹–æ‹½é¢„è§ˆä¿¡æ¯  
- `âœ… å®Œæˆè¿›åº¦æ¡æ‹–æ‹½æ“ä½œ`: æ‹–æ‹½ç»“æŸ
- `ğŸµ æˆåŠŸSeekåˆ°ä½ç½®: MM:SS`: è·³è½¬æˆåŠŸ
- `âŒ Seekæ“ä½œå¤±è´¥`: è·³è½¬å¤±è´¥

#### æ€§èƒ½ç›‘æ§æ—¥å¿—
- `æ’­æ”¾è¿›åº¦: Xç§’ / Yç§’ (å¹³æ»‘æ›´æ–°:å¼€å¯/å…³é—­)`: æ¯10ç§’è¾“å‡ºä¸€æ¬¡
- `è¿›åº¦æ¡å¹³æ»‘æ›´æ–°: å¼€å¯/å…³é—­`: è®¾ç½®å˜æ›´æ—¶è¾“å‡º

### æ³¨æ„äº‹é¡¹

#### ä½¿ç”¨é™åˆ¶
1. éœ€è¦åŠ è½½éŸ³ä¹æ–‡ä»¶æ‰èƒ½æµ‹è¯•seekåŠŸèƒ½
2. éŸ³ä¹æ–‡ä»¶å¿…é¡»æ”¯æŒéšæœºè®¿é—®ï¼ˆMP3ç­‰æ ¼å¼ï¼‰
3. æ‹–æ‹½æ—¶ä¼šæš‚åœæ’­æ”¾è¿›åº¦å®šæ—¶å™¨ï¼Œé¿å…å†²çª

#### é”™è¯¯å¤„ç†
1. éŸ³é¢‘æ§åˆ¶å™¨æ— æ•ˆæ—¶ä¼šè·³è¿‡seekæ“ä½œ
2. ç„¦ç‚¹æ„å¤–ä¸¢å¤±ä¼šå®‰å…¨æ¢å¤æ‰€æœ‰çŠ¶æ€
3. seekå¤±è´¥æ—¶ä¼šè‡ªåŠ¨æ¢å¤åŸå§‹è¿›åº¦æ˜¾ç¤º

#### æ€§èƒ½è€ƒè™‘
1. æ‹–æ‹½æ›´æ–°é™åˆ¶åœ¨60fpsä»¥é¿å…æ€§èƒ½é—®é¢˜
2. å¹³æ»‘åŠ¨ç”»ä»…åœ¨å·®è·>2ç§’æ—¶å¯ç”¨
3. å°äº500msçš„è¿›åº¦å˜åŒ–ä¼šè¢«å¿½ç•¥

### å®é™…åº”ç”¨å»ºè®®

#### åº”ç”¨ç¯å¢ƒä¼˜åŒ–
- è¿›åº¦æ¡æ‰©å±•äº†20åƒç´ çš„ç‚¹å‡»å®¹å¿åº¦
- æ”¯æŒæ‰‹åŠ¿è¯†åˆ«ï¼Œå³ä½¿ç¨å¾®æ»‘å‡ºè¾¹ç•Œä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ
- é•¿æŒ‰æ¨¡å¼é€‚åˆç²¾ç¡®æ“ä½œ
- æ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸‹éŸ³é¢‘æ’­æ”¾æ¨¡æ‹Ÿï¼Œä¾¿äºæµ‹è¯•UIåŠŸèƒ½

#### è§¦æ‘¸å±ä¼˜åŒ–
- å®æ—¶é¢„è§ˆåŠŸèƒ½è®©ç”¨æˆ·å¯ä»¥ç²¾ç¡®æ§åˆ¶è·³è½¬ä½ç½®
- è§†è§‰åé¦ˆè¶³å¤Ÿæ˜æ˜¾ï¼Œåœ¨å„ç§å…‰ç…§æ¡ä»¶ä¸‹éƒ½æ¸…æ™°å¯è§
- å¹³æ»‘åŠ¨ç”»æå‡äº†ç”¨æˆ·ä½“éªŒçš„æµç•…åº¦

## ğŸ¨ è‡ªå®šä¹‰æŒ‡å—

### æ·»åŠ æ–°éŸ³ä¹

#### 1. å‡†å¤‡éŸ³é¢‘æ–‡ä»¶
```bash
# ç¡®ä¿éŸ³é¢‘æ–‡ä»¶ä¸ºæ”¯æŒçš„æ ¼å¼ï¼ˆMP3/WAVï¼‰
# å‡†å¤‡ä¸“è¾‘å°é¢ï¼ˆæ¨è 300x300ï¼‰
convert cover.jpg -resize 300x300 cover.png
```

#### 2. æ›´æ–°é…ç½®æ–‡ä»¶
```json
{
  "musics": [
    {
      "path": "new_song.mp3",
      "name": "æ–°æ­Œåç§°",
      "artist": "è‰ºæœ¯å®¶åç§°",
      "cover": "new_cover.png",
      "total_time": 240000,
      "color": "#FF5722"
    }
  ]
}
```

#### 3. éƒ¨ç½²æ–‡ä»¶
```bash
# å¤åˆ¶æ–‡ä»¶åˆ°èµ„æºç›®å½•
cp new_song.mp3 res/musics/
cp new_cover.png res/musics/

# æ¨é€åˆ°è®¾å¤‡
adb push res/musics/ /data/res/musics/
```

### è‡ªå®šä¹‰ç•Œé¢

#### 1. ä¿®æ”¹ä¸»é¢˜é¢œè‰²
```c
// åœ¨ music_player.c ä¸­ä¿®æ”¹
#define MODERN_PRIMARY_COLOR        lv_color_hex(0x00BFFF)
#define MODERN_SECONDARY_COLOR      lv_color_hex(0xFF6B6B)
#define MODERN_BACKGROUND_COLOR     lv_color_hex(0x121212)
```

#### 2. è°ƒæ•´ç•Œé¢å¸ƒå±€
```c
// ä¿®æ”¹åˆ†è¾¨ç‡é€‚é…
#define SCREEN_WIDTH  1280
#define SCREEN_HEIGHT 800

// è°ƒæ•´æ§ä»¶å¤§å°
#define COVER_SIZE 200
#define BUTTON_SIZE 60
```

#### 3. è‡ªå®šä¹‰è¿›åº¦æ¡æ ·å¼
```c
// ä¿®æ”¹è¿›åº¦æ¡é¢œè‰²å’Œå°ºå¯¸
#define PROGRESS_BAR_HEIGHT_NORMAL 6
#define PROGRESS_BAR_HEIGHT_DRAG   10
#define PROGRESS_BAR_HEIGHT_PRECISE 12

// è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿
#define SMOOTH_ANIMATION_DURATION 200
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç¼–è¯‘é”™è¯¯

**é—®é¢˜**ï¼š`music_player: command not found`
```bash
# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥é…ç½®
grep -r LVX_USE_DEMO_MUSIC_PLAYER vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap/defconfig

# é‡æ–°é…ç½®å’Œç¼–è¯‘
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap distclean
./build.sh vendor/openvela/boards/vela/configs/goldfish-armeabi-v7a-ap -j8
```

**é—®é¢˜**ï¼šæ ˆæº¢å‡ºé”™è¯¯
```bash
# è§£å†³æ–¹æ¡ˆï¼šè°ƒæ•´æ ˆå¤§å°
# ç¼–è¾‘ Makefile
STACKSIZE = 32768  # å½“å‰ä¸º16384ï¼Œå¯è°ƒæ•´åˆ°32768
```

#### 2. è¿è¡Œæ—¶é”™è¯¯

**é—®é¢˜**ï¼šæ‰¾ä¸åˆ°èµ„æºæ–‡ä»¶
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
adb shell ls -la /data/res/

# é‡æ–°æ¨é€èµ„æº
adb push res/ /data/
```

**é—®é¢˜**ï¼šéŸ³é¢‘æ’­æ”¾å¤±è´¥
```bash
# æ£€æŸ¥éŸ³é¢‘è®¾å¤‡
adb shell ls -la /dev/audio/

# æ£€æŸ¥éŸ³é¢‘æ ¼å¼
file res/musics/*.mp3
```

#### 3. è¿›åº¦æ¡é—®é¢˜

**é—®é¢˜**ï¼šæ‹–æ‹½æ— å“åº”
- æ£€æŸ¥éŸ³ä¹æ˜¯å¦å·²åŠ è½½
- ç¡®ä¿éŸ³é¢‘æ§åˆ¶å™¨åˆå§‹åŒ–æˆåŠŸ
- è°ƒç”¨ `reset_progress_bar_state()` é‡ç½®çŠ¶æ€

**é—®é¢˜**ï¼šè·³è½¬å¤±è´¥
- æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ ¼å¼å’Œseekæ”¯æŒ
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- ç¡®ä¿éŸ³é¢‘æ–‡ä»¶æ”¯æŒéšæœºè®¿é—®

**é—®é¢˜**ï¼šåŠ¨ç”»å¡é¡¿
- å°è¯•å…³é—­å¹³æ»‘æ›´æ–°ï¼š`set_progress_smooth_update(false)`
- é™ä½èŠ‚æµé˜ˆå€¼æˆ–å¢åŠ æ›´æ–°é—´éš”
- æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

#### 4. æ¨¡æ‹Ÿå™¨é—®é¢˜

**é—®é¢˜**ï¼šæ¨¡æ‹Ÿå™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ nuttx æ–‡ä»¶
ls -la nuttx/nuttx

# é‡æ–°åˆ›å»ºç¬¦å·é“¾æ¥
cd nuttx && rm -f nuttx && ln -sf vela_ap.elf nuttx
```

**é—®é¢˜**ï¼šADB è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 555

# é‡æ–°è¿æ¥
adb disconnect 127.0.0.1:5555
adb connect 127.0.0.1:5555
```

### è°ƒè¯•æŠ€å·§

#### 1. ä½¿ç”¨æ—¥å¿—è¾“å‡º
```c
// æ·»åŠ è°ƒè¯•æ—¥å¿—
#define MUSIC_DEBUG 1

#if MUSIC_DEBUG
#define DLOG(fmt, ...) printf("[MUSIC] " fmt "\n", ##__VA_ARGS__)
#else
#define DLOG(fmt, ...)
#endif

// åœ¨å…³é”®ä½ç½®æ·»åŠ æ—¥å¿—
DLOG("Loading audio file: %s", file_path);
DLOG("Audio playback started, duration: %lu ms", duration);
```

#### 2. è¿›åº¦æ¡è°ƒè¯•
```c
// å¯ç”¨è¿›åº¦æ¡æµ‹è¯•åŠŸèƒ½
#ifdef DEBUG
test_progress_bar_functionality();
#endif
```

#### 3. å†…å­˜åˆ†æ
```c
// æ·»åŠ å†…å­˜ä½¿ç”¨ç»Ÿè®¡
static void print_memory_usage(void) {
    lv_mem_monitor_t info;
    lv_mem_monitor(&info);
    printf("Memory usage:\n");
    printf("  Free heap: %zu bytes\n", info.free_size);
    printf("  Used heap: %zu bytes\n", info.total_size - info.free_size);
}
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. ç•Œé¢ä¼˜åŒ–
```c
// å‡å°‘ä¸å¿…è¦çš„é‡ç»˜
lv_obj_add_flag(obj, LV_OBJ_FLAG_FLOATING);

// ä½¿ç”¨ç¼“å­˜æé«˜æ€§èƒ½
lv_obj_set_style_bg_opa(obj, LV_OPA_COVER, 0);
```

#### 2. è¿›åº¦æ¡ä¼˜åŒ–
```c
// ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½
#define ANIMATION_DURATION 100  // å‡å°‘åŠ¨ç”»æ—¶é•¿

// è°ƒæ•´èŠ‚æµé¢‘ç‡
#define THROTTLE_INTERVAL 32   // 30fpsæ›´æ–°
```

#### 3. å†…å­˜ä¼˜åŒ–
```c
// é¢„åˆ†é…å†…å­˜æ± 
static uint8_t audio_buffer_pool[AUDIO_BUFFER_SIZE * 4];

// ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†
static album_info_t album_pool[MAX_ALBUMS];
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ¶æ„æ¦‚è§ˆ

Vela é«˜çº§éŸ³ä¹æ’­æ”¾å™¨é‡‡ç”¨ç°ä»£åŒ–æ¨¡å—åŒ–åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸‹åˆ°ä¸ŠåŒ…æ‹¬ï¼š

- **ç¡¬ä»¶æŠ½è±¡å±‚**ï¼šéŸ³é¢‘ç¡¬ä»¶ã€å­˜å‚¨è®¾å¤‡ã€ç½‘ç»œç¡¬ä»¶çš„åº•å±‚é©±åŠ¨
- **ç³»ç»ŸæŠ½è±¡å±‚ (NuttX)**ï¼šéŸ³é¢‘é©±åŠ¨ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œæ ˆçš„ç³»ç»Ÿçº§æœåŠ¡  
- **éŸ³é¢‘è§£ç å±‚**ï¼šMP3è§£ç å™¨(libmad)ã€WAVè§£ç å™¨ã€æ ¼å¼è‡ªåŠ¨æ£€æµ‹
- **æœåŠ¡å±‚**ï¼šéŸ³é¢‘æ§åˆ¶ã€æ–‡ä»¶ç®¡ç†ã€Wi-Fiç®¡ç†ç­‰åº”ç”¨æœåŠ¡
- **ä¸šåŠ¡é€»è¾‘å±‚**ï¼šçŠ¶æ€ç®¡ç†ã€æ’­æ”¾æ§åˆ¶ã€æ’­æ”¾åˆ—è¡¨é€»è¾‘ã€è¿›åº¦æ¡æ§åˆ¶
- **UIæ¨¡å—å±‚**ï¼šå¯åŠ¨é¡µé¢æ¨¡å—ã€ä¸»ç•Œé¢æ¨¡å—ã€æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨æ¨¡å—
- **ç”¨æˆ·ç•Œé¢å±‚ (LVGL)**ï¼šç°ä»£åŒ–é£æ ¼å›¾å½¢ç•Œé¢æ¸²æŸ“å’Œè§¦å±äº¤äº’

### æ•°æ®æµå›¾

ç³»ç»Ÿçš„æ•°æ®æµä¸»è¦åŒ…æ‹¬å››ä¸ªä¸»è¦è·¯å¾„ï¼š

1. **åº”ç”¨å¯åŠ¨æµ**ï¼š`main()` â†’ `splash_screen_create()` â†’ å¯åŠ¨åŠ¨ç”» â†’ `app_create()` â†’ ä¸»ç•Œé¢
2. **ç”¨æˆ·äº¤äº’æµ**ï¼šç”¨æˆ·æ“ä½œ â†’ äº‹ä»¶å¤„ç† â†’ çŠ¶æ€æ›´æ–° â†’ UIåˆ·æ–° â†’ æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨
3. **éŸ³é¢‘æ’­æ”¾æµ**ï¼šæ ¼å¼æ£€æµ‹ â†’ MP3/WAVè§£ç  â†’ éŸ³é¢‘æ§åˆ¶ â†’ ç¡¬ä»¶æ’­æ”¾ â†’ çŠ¶æ€åé¦ˆ â†’ è¿›åº¦æ›´æ–°  
4. **æ¨¡å—é€šä¿¡æµ**ï¼šä¸»ç•Œé¢ â†” æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨ â†” éŸ³é¢‘æ§åˆ¶å™¨ â†” çŠ¶æ€ç®¡ç†

### æ¨¡å—å…³ç³»

æ–°æ¶æ„ä¸‹çš„æ¨¡å—é—´ä¾èµ–å…³ç³»ï¼š

- **main** å‡½æ•°é¦–å…ˆè°ƒç”¨ **splash_screen_create()** åˆ›å»ºå¯åŠ¨é¡µé¢
- **splash_screen** æ¨¡å—åœ¨åŠ¨ç”»å®Œæˆåè‡ªåŠ¨è°ƒç”¨ **app_create()** 
- **init_resource** è´Ÿè´£åŠ è½½LVGLå­—ä½“ã€å›¾ç‰‡å’ŒéŸ³ä¹é…ç½®JSON
- **app_create_main_page** åˆ›å»ºUIç»„ä»¶å¹¶è®¾ç½®äº‹ä»¶å¤„ç†
- **playlist_manager** æ¨¡å—ç‹¬ç«‹ç®¡ç†æ’­æ”¾åˆ—è¡¨UIå’Œäº¤äº’é€»è¾‘
- **audio_ctl** æ¨¡å—æ”¯æŒMP3/WAVæ ¼å¼ï¼Œé€šè¿‡æ¨¡æ‹Ÿå™¨ä¸éŸ³é¢‘ç³»ç»Ÿäº¤äº’
- **progress_bar_system** æä¾›ä¸“ä¸šçº§è¿›åº¦æ¡æ§åˆ¶å’ŒåŠ¨ç”»æ•ˆæœ
- **ui_events** è§¦å‘ **state_machine** çŠ¶æ€è½¬æ¢ï¼ŒåŒæ—¶æ›´æ–°ä¸»ç•Œé¢å’Œæ’­æ”¾åˆ—è¡¨æ˜¾ç¤º

### å…³é”®æ•°æ®ç»“æ„

#### è¿è¡Œæ—¶ä¸Šä¸‹æ–‡
```c
struct ctx_s {
    bool resource_healthy_check;          // èµ„æºå¥åº·æ£€æŸ¥
    album_info_t* current_album;          // å½“å‰ä¸“è¾‘
    
    uint16_t volume;                      // éŸ³é‡
    play_status_t play_status_prev;       // ä¸Šä¸€æ¬¡æ’­æ”¾çŠ¶æ€
    play_status_t play_status;            // å½“å‰æ’­æ”¾çŠ¶æ€
    uint64_t current_time;                // å½“å‰æ’­æ”¾æ—¶é—´
    
    struct {
        lv_timer_t* volume_bar_countdown;      // éŸ³é‡æ¡å€’è®¡æ—¶
        lv_timer_t* playback_progress_update;  // æ’­æ”¾è¿›åº¦æ›´æ–°
        lv_timer_t* refresh_date_time;         // æ—¶é—´æ—¥æœŸåˆ·æ–°
    } timers;
    
    audioctl_s* audioctl;                 // éŸ³é¢‘æ§åˆ¶å¥æŸ„
};
```

#### èµ„æºç®¡ç†
```c
struct resource_s {
    struct {
        lv_obj_t* time;                    // æ—¶é—´æ˜¾ç¤º
        lv_obj_t* date;                    // æ—¥æœŸæ˜¾ç¤º  
        lv_obj_t* player_group;            // æ’­æ”¾å™¨ç»„
        lv_obj_t* album_cover_container;   // åœ†å½¢å°é¢å®¹å™¨
        lv_obj_t* volume_bar;              // éŸ³é‡æ¡
        lv_obj_t* playback_progress;       // æ’­æ”¾è¿›åº¦æ¡
        // ... æ›´å¤šUIç»„ä»¶
    } ui;
    
    struct {
        struct { const lv_font_t* normal; } size_16;
        struct { const lv_font_t* bold; } size_22;
        struct { const lv_font_t* normal; } size_24;
        struct { const lv_font_t* normal; } size_28;
        struct { const lv_font_t* bold; } size_60;
    } fonts;
    
    struct {
        lv_style_t button_default;         // æŒ‰é’®é»˜è®¤æ ·å¼
        lv_style_t circular_cover;          // åœ†å½¢å°é¢æ ·å¼
        lv_style_t gradient_progress;       // æ¸å˜è¿›åº¦æ¡æ ·å¼
        lv_style_t modern_card;             // ç°ä»£å¡ç‰‡æ ·å¼
    } styles;
    
    album_info_t* albums;                  // ä¸“è¾‘æ•°ç»„
    uint8_t album_count;                   // ä¸“è¾‘æ•°é‡
};
```

#### è¿›åº¦æ¡çŠ¶æ€ç®¡ç†
```c
typedef struct {
    bool is_seeking;                // æ˜¯å¦æ­£åœ¨æ‹–æ‹½
    bool was_playing;              // æ‹–æ‹½å‰æ˜¯å¦åœ¨æ’­æ”¾
    uint64_t seek_preview_time;    // é¢„è§ˆæ—¶é—´
    uint32_t last_update_tick;     // ä¸Šæ¬¡æ›´æ–°æ—¶é—´æˆ³
    lv_anim_t smooth_anim;         // å¹³æ»‘åŠ¨ç”»
    bool smooth_update_enabled;    // æ˜¯å¦å¯ç”¨å¹³æ»‘æ›´æ–°
    int32_t target_value;          // ç›®æ ‡å€¼
    int32_t current_value;         // å½“å‰å€¼
} progress_bar_state_t;
```

### çŠ¶æ€æœºè®¾è®¡

```c
typedef enum {
    PLAY_STATUS_STOP,    // åœæ­¢
    PLAY_STATUS_PLAY,    // æ’­æ”¾
    PLAY_STATUS_PAUSE,   // æš‚åœ
} play_status_t;

// çŠ¶æ€è½¬æ¢è¡¨
static const state_transition_t transitions[] = {
    {PLAY_STATUS_STOP,  PLAY_STATUS_PLAY,  action_start_playback},
    {PLAY_STATUS_PLAY,  PLAY_STATUS_PAUSE, action_pause_playback},
    {PLAY_STATUS_PAUSE, PLAY_STATUS_PLAY,  action_resume_playback},
    {PLAY_STATUS_PLAY,  PLAY_STATUS_STOP,  action_stop_playback},
    {PLAY_STATUS_PAUSE, PLAY_STATUS_STOP,  action_stop_playback},
};
```

## ğŸ“š API å‚è€ƒ

### æ ¸å¿ƒ API

#### åº”ç”¨ç¨‹åºæ§åˆ¶
```c
/**
 * @brief åˆ›å»ºå¹¶åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨åº”ç”¨
 * @return void
 */
void app_create(void);

/**
 * @brief è®¾ç½®æ’­æ”¾çŠ¶æ€
 * @param status æ’­æ”¾çŠ¶æ€
 */
void app_set_play_status(play_status_t status);

/**
 * @brief åˆ‡æ¢åˆ°æŒ‡å®šä¸“è¾‘
 * @param index ä¸“è¾‘ç´¢å¼•
 */
void app_switch_to_album(int index);

/**
 * @brief åˆ·æ–°æ—¶é—´æ—¥æœŸæ˜¾ç¤º
 */
static void app_refresh_date_time(void);
```

#### å¯åŠ¨é¡µé¢æ¨¡å— API
```c
/**
 * @brief åˆ›å»ºå¯åŠ¨é¡µé¢
 * @note è‡ªåŠ¨æ˜¾ç¤ºLogoåŠ¨ç”»ï¼Œ2ç§’åè·³è½¬ä¸»ç•Œé¢
 */
void splash_screen_create(void);
```

#### æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨ API
```c
/**
 * @brief åˆ›å»ºä¸“ä¸šæ’­æ”¾åˆ—è¡¨ç•Œé¢
 * @param parent çˆ¶å®¹å™¨
 */
void playlist_manager_create(lv_obj_t* parent);

/**
 * @brief åˆ·æ–°æ’­æ”¾åˆ—è¡¨æ˜¾ç¤º
 */
void playlist_manager_refresh(void);

/**
 * @brief å…³é—­æ’­æ”¾åˆ—è¡¨
 */
void playlist_manager_close(void);

/**
 * @brief æ£€æŸ¥æ’­æ”¾åˆ—è¡¨æ˜¯å¦æ‰“å¼€
 * @return true if open, false if closed
 */
bool playlist_manager_is_open(void);
```

#### è¿›åº¦æ¡æ§åˆ¶ API
```c
/**
 * @brief è®¾ç½®è¿›åº¦æ¡å¹³æ»‘æ›´æ–°å¼€å…³
 * @param enabled æ˜¯å¦å¯ç”¨å¹³æ»‘æ›´æ–°
 */
static void set_progress_smooth_update(bool enabled);

/**
 * @brief é‡ç½®è¿›åº¦æ¡çŠ¶æ€
 */
static void reset_progress_bar_state(void);

/**
 * @brief å¯åŠ¨å¹³æ»‘è¿›åº¦åŠ¨ç”»
 * @param target_value ç›®æ ‡å€¼
 */
static void start_smooth_progress_animation(int32_t target_value);

/**
 * @brief è¿›åº¦æ¡äº‹ä»¶å¤„ç†å™¨
 * @param e äº‹ä»¶å¯¹è±¡
 */
static void app_playback_progress_bar_event_handler(lv_event_t* e);

/**
 * @brief è¿›åº¦æ¡åŠŸèƒ½æµ‹è¯•
 */
static void test_progress_bar_functionality(void);
```

#### éŸ³é¢‘æ§åˆ¶ APIï¼ˆæ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ï¼‰
```c
/**
 * @brief åˆå§‹åŒ–éŸ³é¢‘æ§åˆ¶å™¨
 * @param file_path éŸ³é¢‘æ–‡ä»¶è·¯å¾„
 * @return éŸ³é¢‘æ§åˆ¶å¥æŸ„
 */
audioctl_s* audio_ctl_init_nxaudio(const char* file_path);

/**
 * @brief å¼€å§‹æ’­æ”¾
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int audio_ctl_start(audioctl_s* audioctl);

/**
 * @brief æš‚åœæ’­æ”¾
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int audio_ctl_pause(audioctl_s* audioctl);

/**
 * @brief åœæ­¢æ’­æ”¾
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int audio_ctl_stop(audioctl_s* audioctl);

/**
 * @brief è®¾ç½®éŸ³é‡
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @param volume éŸ³é‡å€¼
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int audio_ctl_set_volume(audioctl_s* audioctl, uint16_t volume);

/**
 * @brief è·³è½¬åˆ°æŒ‡å®šä½ç½®
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @param position ä½ç½®ï¼ˆç§’ï¼‰
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int audio_ctl_seek(audioctl_s* audioctl, uint32_t position);

/**
 * @brief è·å–å½“å‰æ’­æ”¾ä½ç½®
 * @param audioctl éŸ³é¢‘æ§åˆ¶å¥æŸ„
 * @return å½“å‰ä½ç½®ï¼ˆç§’ï¼‰ï¼Œ-1è¡¨ç¤ºå¤±è´¥
 */
int audio_ctl_get_position(audioctl_s* audioctl);
```

#### å­—ä½“é…ç½® API
```c
/**
 * @brief åˆå§‹åŒ–å­—ä½“ç³»ç»Ÿ
 */
void font_system_init(void);

/**
 * @brief æ ¹æ®å¤§å°è·å–å­—ä½“
 * @param size å­—ä½“å¤§å°
 * @return å­—ä½“æŒ‡é’ˆ
 */
const lv_font_t* get_font_by_size(int size);

/**
 * @brief è®¾ç½®UTF-8æ–‡æœ¬
 * @param label æ ‡ç­¾å¯¹è±¡
 * @param text æ–‡æœ¬å†…å®¹
 * @param font å­—ä½“
 */
void set_label_utf8_text(lv_obj_t* label, const char* text, const lv_font_t* font);

/**
 * @brief è·å–æ’­æ”¾åˆ—è¡¨å­—ä½“
 * @param type å­—ä½“ç±»å‹ï¼ˆ"title"/"song"ï¼‰
 * @return å­—ä½“æŒ‡é’ˆ
 */
const lv_font_t* get_playlist_font(const char* type);
```

#### Wi-Fi ç®¡ç† API
```c
/**
 * @brief Wi-Fi é…ç½®ç»“æ„
 */
typedef struct {
    char ssid[64];      // ç½‘ç»œåç§°
    char pswd[128];     // å¯†ç 
    uint32_t conn_delay; // è¿æ¥å»¶è¿Ÿ
    int ver_flag;       // ç‰ˆæœ¬æ ‡å¿—
} wifi_conf_t;

/**
 * @brief è¿æ¥ Wi-Fi
 * @param conf Wi-Fi é…ç½®
 * @return 0 æˆåŠŸ, -1 å¤±è´¥
 */
int wifi_connect(wifi_conf_t* conf);
```

### UI ç»„ä»¶ API

#### äº‹ä»¶å¤„ç†
```c
/**
 * @brief æ’­æ”¾æŒ‰é’®äº‹ä»¶å¤„ç†
 * @param e äº‹ä»¶å¯¹è±¡
 */
static void app_play_status_event_handler(lv_event_t* e);

/**
 * @brief éŸ³é‡æ¡äº‹ä»¶å¤„ç†
 * @param e äº‹ä»¶å¯¹è±¡
 */
static void app_volume_bar_event_handler(lv_event_t* e);

/**
 * @brief æ’­æ”¾åˆ—è¡¨äº‹ä»¶å¤„ç†
 * @param e äº‹ä»¶å¯¹è±¡
 */
static void app_playlist_event_handler(lv_event_t* e);

/**
 * @brief åˆ‡æ­ŒæŒ‰é’®äº‹ä»¶å¤„ç†
 * @param e äº‹ä»¶å¯¹è±¡
 */
static void app_switch_album_event_handler(lv_event_t* e);
```

#### UI åˆ·æ–°
```c
/**
 * @brief åˆ·æ–°ä¸“è¾‘ä¿¡æ¯æ˜¾ç¤º
 */
static void app_refresh_album_info(void);

/**
 * @brief åˆ·æ–°æ’­æ”¾è¿›åº¦
 */
static void app_refresh_playback_progress(void);

/**
 * @brief åˆ·æ–°éŸ³é‡æ¡
 */
static void app_refresh_volume_bar(void);

/**
 * @brief åˆ·æ–°æ’­æ”¾åˆ—è¡¨
 */
static void app_refresh_playlist(void);
```

### é…ç½® API

#### é…ç½®æ–‡ä»¶ç®¡ç†
```c
/**
 * @brief è¯»å–é…ç½®æ–‡ä»¶
 */
static void read_configs(void);

/**
 * @brief é‡æ–°åŠ è½½éŸ³ä¹é…ç½®
 */
static void reload_music_config(void);
```

#### èµ„æºç®¡ç†
```c
/**
 * @brief åˆå§‹åŒ–èµ„æº
 * @return true æˆåŠŸ, false å¤±è´¥
 */
static bool init_resource(void);
```

### é”™è¯¯ä»£ç 

```c
#define MUSIC_ERROR_OK              0    // æˆåŠŸ
#define MUSIC_ERROR_INVALID_PARAM  -1    // æ— æ•ˆå‚æ•°
#define MUSIC_ERROR_NO_MEMORY      -2    // å†…å­˜ä¸è¶³
#define MUSIC_ERROR_FILE_NOT_FOUND -3    // æ–‡ä»¶æœªæ‰¾åˆ°
#define MUSIC_ERROR_AUDIO_INIT     -4    // éŸ³é¢‘åˆå§‹åŒ–å¤±è´¥
#define MUSIC_ERROR_NETWORK        -5    // ç½‘ç»œé”™è¯¯
#define MUSIC_ERROR_CONFIG         -6    // é…ç½®é”™è¯¯
```

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. **Fork é¡¹ç›®**
   ```bash
   git clone https://github.com/your-username/openvela-music-player.git
   cd openvela-music-player
   ```

2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/new-feature
   ```

3. **å¼€å‘å’Œæµ‹è¯•**
   ```bash
   # å¼€å‘æ–°åŠŸèƒ½
   # ç¼–å†™æµ‹è¯•ç”¨ä¾‹
   # è¿è¡Œæµ‹è¯•
   make test
   ```

4. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: add new audio format support"
   ```

5. **æ¨é€å’ŒPR**
   ```bash
   git push origin feature/new-feature
   # åˆ›å»º Pull Request
   ```

### ä»£ç è§„èŒƒ

#### C ä»£ç é£æ ¼
```c
// å‡½æ•°å‘½åï¼šsnake_case
static void app_create_main_page(void);

// å˜é‡å‘½åï¼šsnake_case
static bool resource_healthy_check = false;

// å¸¸é‡å‘½åï¼šUPPER_CASE
#define MAX_ALBUM_COUNT 100

// ç»“æ„ä½“å‘½åï¼šsnake_case_t
typedef struct album_info_s {
    const char* name;
    const char* artist;
} album_info_t;
```

#### æ³¨é‡Šè§„èŒƒ
```c
/**
 * @brief å‡½æ•°ç®€è¦æè¿°
 * @param param1 å‚æ•°1æè¿°
 * @param param2 å‚æ•°2æè¿°
 * @return è¿”å›å€¼æè¿°
 * @note æ³¨æ„äº‹é¡¹
 * @warning è­¦å‘Šä¿¡æ¯
 */
int function_name(int param1, const char* param2);
```

#### æäº¤ä¿¡æ¯è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³

ç¤ºä¾‹ï¼š
feat: add professional progress bar control
fix: resolve memory leak in audio playback
docs: update API documentation
```

### æµ‹è¯•æŒ‡å—

#### å•å…ƒæµ‹è¯•
```c
// test/test_audio_ctl.c
#include "unity.h"
#include "audio_ctl.h"

void test_audio_ctl_init(void) {
    audioctl_s* ctl = audio_ctl_init_nxaudio("test.mp3");
    TEST_ASSERT_NOT_NULL(ctl);
    audio_ctl_uninit_nxaudio(ctl);
}

void test_progress_bar_functionality(void) {
    // æµ‹è¯•è¿›åº¦æ¡åŠŸèƒ½
    set_progress_smooth_update(true);
    TEST_ASSERT_TRUE(progress_state.smooth_update_enabled);
}
```

#### é›†æˆæµ‹è¯•
```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
./scripts/run_tests.sh

# è¿è¡Œæ€§èƒ½æµ‹è¯•
./scripts/performance_test.sh
```

### æ–‡æ¡£è´¡çŒ®

1. **API æ–‡æ¡£**ï¼šä½¿ç”¨ Doxygen æ ¼å¼
2. **ç”¨æˆ·æ–‡æ¡£**ï¼šä½¿ç”¨ Markdown æ ¼å¼
3. **ä»£ç ç¤ºä¾‹**ï¼šæä¾›å®Œæ•´å¯è¿è¡Œçš„ç¤ºä¾‹
4. **ç¿»è¯‘**ï¼šæ”¯æŒå¤šè¯­è¨€æ–‡æ¡£

### é—®é¢˜æŠ¥å‘Š

æäº¤ Issue æ—¶è¯·åŒ…å«ï¼š
- æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
- OpenVela ç‰ˆæœ¬
- å¤ç°æ­¥éª¤
- æœŸæœ›è¡Œä¸º
- å®é™…è¡Œä¸º
- ç›¸å…³æ—¥å¿—

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 å¼€æºè®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- **OpenVela**ï¼šæä¾›ä¼˜ç§€çš„åµŒå…¥å¼æ“ä½œç³»ç»Ÿå¹³å°
- **LVGL ç¤¾åŒº**ï¼šæä¾›å›¾å½¢åº“å’ŒUIç»„ä»¶æ”¯æŒ

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ä¸»é¡µ**ï¼šhttps://github.com/openvela/music-player
- **æ–‡æ¡£ç«™ç‚¹**ï¼šhttps://docs.openvela.org/music-player  
- **é—®é¢˜åé¦ˆ**ï¼šhttps://github.com/openvela/music-player/issues
- **è®¨è®ºç¤¾åŒº**ï¼šhttps://forum.openvela.org
- **Vela Audio**ï¼švela@music-player.com

## ğŸ†• æ›´æ–°æ—¥å¿—

### v2.1.0 - å½“å‰ç‰ˆæœ¬ (2025-09-25)
- âœ… **ä¸“ä¸šçº§è¿›åº¦æ¡ç³»ç»Ÿ**ï¼šæ‹–æ‹½æ§åˆ¶ã€å¹³æ»‘åŠ¨ç”»ã€å®æ—¶é¢„è§ˆ
- âœ… **æ™ºèƒ½äº¤äº’è®¾è®¡**ï¼šå¤šæ¨¡å¼æ“ä½œæ”¯æŒã€å¢å¼ºè§†è§‰åé¦ˆ
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼š60fpsèŠ‚æµã€æ™ºèƒ½åŠ¨ç”»å¯åœæœºåˆ¶
- âœ… **å¥å£®é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„çŠ¶æ€ç®¡ç†å’Œå¼‚å¸¸æ¢å¤
- âœ… **æ¨¡æ‹Ÿå™¨éŸ³é¢‘æ”¯æŒ**ï¼šéŸ³é¢‘æ§åˆ¶æ¨¡æ‹Ÿå™¨å®ç°
- âœ… **æ ˆå†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘æ ˆå¤§å°ä»40KBåˆ°16KB
- âœ… **ä»£ç è´¨é‡æå‡**ï¼šä¿®å¤ç¼–è¯‘é”™è¯¯ï¼Œä¼˜åŒ–å‡½æ•°å£°æ˜
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šèåˆæ‰€æœ‰åŠŸèƒ½è¯´æ˜åˆ°ç»Ÿä¸€README

### v2.0.0 - ä¸“ä¸šç‰ˆ (2025-08-18)
- **å…¨æ–°UIè®¾è®¡**ï¼šç°ä»£åŒ–é£æ ¼ç•Œé¢
- âœ… **å¯åŠ¨é¡µé¢æ¨¡å—**ï¼šå“ç‰ŒLogoåŠ¨ç”»å’ŒåŠ è½½æ•ˆæœ
- âœ… **æ’­æ”¾åˆ—è¡¨ç®¡ç†å™¨**ï¼šç‹¬ç«‹æ¨¡å—åŒ–æ’­æ”¾åˆ—è¡¨
- âœ… **MP3æ ¼å¼æ”¯æŒ**ï¼šlibmadé«˜è´¨é‡è§£ç 
- âœ… **é¡¶éƒ¨çŠ¶æ€æ **ï¼šæ—¶é—´ã€æ—¥æœŸã€Wi-Fiã€ç”µæ± æ˜¾ç¤º
- âœ… **é«˜çº§æ ·å¼ç³»ç»Ÿ**ï¼šç£¨ç ‚ç»ç’ƒã€æ¸å˜ã€éœ“è™¹ä¸»é¢˜
- âœ… **æ¨¡å—åŒ–æ¶æ„**ï¼šæ›´å¥½çš„ä»£ç ç»„ç»‡å’Œå¯ç»´æŠ¤æ€§

### v1.0.0 - åŸºç¡€ç‰ˆæœ¬ (2025-07-20)
- âœ… åŸºç¡€éŸ³ä¹æ’­æ”¾åŠŸèƒ½
- âœ… WAVæ ¼å¼æ”¯æŒ
- âœ… ç®€å•UIç•Œé¢
- âœ… åŸºç¡€éŸ³é¢‘æ§åˆ¶åŠŸèƒ½

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2025-09-25*
*å½“å‰ç‰ˆæœ¬ï¼šv2.1.0*
*é¡¹ç›®çŠ¶æ€ï¼šæ´»è·ƒå¼€å‘ä¸­*
*æ–‡æ¡£çŠ¶æ€ï¼šä¸ä»£ç åŒæ­¥*